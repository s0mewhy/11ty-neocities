---js

const layout = "layouts/base.njk";

/* todo: replace this with tags generated from _data/allart.json 

const arts = [
    {
        "img": "/img/art/2025/columbo2-color.webp", "tags": ["columbo"]
    },
    {
        "img": "/img/art/2024/The-adoration.webp", "tags": ["cat"]
    }
];

let tags = new Array();

for(let i = 0; i < arts.length; i++) {
    tags = tags.concat(arts[i].tags);
}
tags.sort()
*/

/* use a few pre-defined tags until we figure out how to get them from allart.json */
const tags = ["columbo","cat","disco elysium","star trek tos"]
tags.sort()

const pagination = {
    data: "tags",
    size: 1,
    alias: "tag",
    // addAllPagesToCollections: true,
};

const eleventyExcludeFromCollections = true;

const eleventyComputed = {
    title: "Tagged '{{ tag }}'",
    permalink: function(data) {
        // If DuplicatePermalinkOutputError occurs, check that no tag occurs
        // with differing case, e.g. "RSS" and "rss".
        return `/tags/${this.slugify(data.tag)}/`;
    }
};

---

<div style="text-align:center">
    <p>(click to enlarge)</p>
    <h3>browse by tags:</h3>
    <h3>
    {% for t in tags %}
        {% if t == tag %}
            {{t}} 
        {% else %}
            <a href="/tags/{{t | slugify}}/">{{t}}</a>
        {% endif %}
    {% endfor %}
    </h3>
    <div id="gallery">
        {% for art in allart %}
        {% if art.tags contains tag %}
        {% if art.cw %}
        <div class="gallery-img-container">
            <a href="#img_{{forloop.index}}"><img class="gallery-img-blur" src="{{art.img}}"></a>
            <a href="#_" class="lightbox trans" id="img_{{forloop.index}}"><img src="{{art.img}}"></a>
            <div class="content-warning">
                <h3>cw: {{art.cw}}</h3>
                <p>(click to view)</p>
            </div>
        </div>
        {% else %}
        <a href="#img_{{forloop.index}}"><img class="gallery-img" src="{{art.img}}"></a>
        <a href="#_" class="lightbox trans" id="img_{{forloop.index}}"><img src="{{art.img}}"></a>
        {% endif %}
        {% endif %}
        {% endfor %}
    </div>
</div>
